@tailwind base;
@tailwind components;
@tailwind utilities;

/* NLUX Chat Markdown Styling - Comprehensive CSS targeting */

/* Target all possible NLUX message containers */
.nlux-ai-chat *,
[data-nlux] *,
.nlux-message *,
.nlux-chat-message *,
.ai-chat *,
.ai-chat-message * {
  /* Headers */
  h1, h2, h3, h4, h5, h6 {
    @apply font-bold text-foreground mb-2 mt-3;
  }
  
  h1 { @apply text-2xl; }
  h2 { @apply text-xl; }
  h3 { @apply text-lg; }
  h4 { @apply text-base; }
  
  /* Lists - Fixed with proper text color */
  ul {
    @apply list-disc list-outside mb-3 ml-6 space-y-1;
    color: var(--foreground) !important;
  }
  
  ol {
    @apply list-decimal list-outside mb-3 ml-6 space-y-1;
    color: var(--foreground) !important;
  }
  
  li {
    @apply text-foreground leading-relaxed mb-1;
    color: inherit !important;
  }
  
  /* Fix bullet and number colors */
  li::marker {
    color: var(--foreground) !important;
  }
  
  /* Text formatting */
  strong, b {
    @apply font-bold;
  }
  
  em, i {
    @apply italic;
  }
  
  /* Paragraphs */
  p {
    @apply mb-2 text-foreground leading-relaxed;
  }
}

/* Global overrides for any markdown content */
* h1, * h2, * h3, * h4, * h5, * h6 {
  @apply font-bold !important;
}

* strong, * b {
  @apply font-bold !important;
}

* ul {
  @apply list-disc !important;
  list-style-position: outside !important;
  margin-left: 1.5rem !important;
}

* ol {
  @apply list-decimal !important;
  list-style-position: outside !important;
  margin-left: 1.5rem !important;
}

* li {
  @apply mb-1 !important;
  display: list-item !important;
}

/* Force list bullets to show with proper color */
ul li::marker {
  color: var(--foreground) !important;
}

ol li::marker {
  color: var(--foreground) !important;
}

/* Ensure list items have correct text color */
ul li, ol li {
  color: var(--foreground) !important;
}

/* Code styling */
code {
  @apply bg-muted px-1 py-0.5 rounded text-sm font-mono;
}

pre {
  @apply bg-muted p-4 rounded-md overflow-x-auto mb-4;
}

pre code {
  @apply bg-transparent p-0;
}

/* Blockquotes */
blockquote {
  @apply border-l-4 border-muted-foreground pl-4 italic text-muted-foreground mb-4;
}

/* Links - Make them blue and visible */
a {
  @apply text-blue-600 hover:text-blue-800 underline cursor-pointer !important;
}

/* Dark mode links */
.dark a {
  @apply text-blue-400 hover:text-blue-300 !important;
}

/* Force link styling in all contexts */
* a {
  color: #2563eb !important; /* blue-600 */
  text-decoration: underline !important;
}

.dark * a {
  color: #60a5fa !important; /* blue-400 */
}

/* Additional text formatting improvements */
* em, * i {
  @apply italic !important;
}

* u {
  @apply underline !important;
}

* del, * s {
  @apply line-through !important;
}

/* Better code formatting */
* code {
  @apply bg-gray-100 text-gray-800 px-1 py-0.5 rounded text-sm font-mono !important;
}

.dark * code {
  @apply bg-gray-800 text-gray-200 !important;
}

* pre {
  @apply bg-gray-100 text-gray-800 p-4 rounded-md overflow-x-auto mb-4 !important;
}

.dark * pre {
  @apply bg-gray-800 text-gray-200 !important;
}

* pre code {
  @apply bg-transparent p-0 !important;
}

/* Better blockquotes */
* blockquote {
  @apply border-l-4 border-blue-500 pl-4 italic text-gray-600 mb-4 !important;
}

.dark * blockquote {
  @apply text-gray-400 !important;
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* NLUX Chat Markdown Formatting Enhancements */
@layer components {
  /* Ensure markdown formatting works properly in NLUX */
  .nlux-ChatRoom .nlux-AssistantMessage .nlux-MessageContent {
    /* Bullet points */
    ul {
      @apply list-disc list-inside my-2 ml-4 space-y-1;
    }
    
    ol {
      @apply list-decimal list-inside my-2 ml-4 space-y-1;
    }
    
    li {
      @apply text-foreground;
    }
    
    /* Bold text */
    strong, b {
      @apply font-bold text-foreground;
    }
    
    /* Emphasis */
    em, i {
      @apply italic text-foreground;
    }
    
    /* Code blocks */
    code {
      @apply bg-muted px-1 py-0.5 rounded text-sm font-mono;
    }
    
    pre {
      @apply bg-muted p-3 rounded-md overflow-x-auto my-2;
    }
    
    pre code {
      @apply bg-transparent p-0;
    }
    
    /* Headers */
    h1, h2, h3, h4, h5, h6 {
      @apply font-bold text-foreground mt-4 mb-2;
    }
    
    h1 { @apply text-2xl; }
    h2 { @apply text-xl; }
    h3 { @apply text-lg; }
    
    /* Paragraphs */
    p {
      @apply my-2 text-foreground;
    }
    
    /* Links */
    a {
      @apply text-primary underline hover:text-primary/80;
    }
    
    /* Blockquotes */
    blockquote {
      @apply border-l-4 border-muted-foreground pl-4 my-2 text-muted-foreground italic;
    }
  }
  
  /* MCP Tool Execution Status Styles */
  .mcp-tool-status {
    @apply flex items-center gap-2 my-2 p-2 rounded-md bg-muted;
  }
  
  .mcp-tool-executing {
    @apply bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800;
  }
  
  .mcp-tool-success {
    @apply bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800;
  }
  
  .mcp-tool-error {
    @apply bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800;
  }
  
  .mcp-tool-spinner {
    @apply animate-spin h-4 w-4 rounded-full border-2 border-current border-t-transparent;
  }
}
